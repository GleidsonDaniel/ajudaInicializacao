"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,"__esModule",{value:!0});require("./AcessoApp.css");var _queryString=require("query-string"),_queryString2=_interopRequireDefault(_queryString),_react=require("react"),_react2=_interopRequireDefault(_react),_reactCookies=require("react-cookies"),_reactCookies2=_interopRequireDefault(_reactCookies),_AcessoPortal=require("../AcessoPortal"),_AcessoPortal2=_interopRequireDefault(_AcessoPortal);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var AcessoApp=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"componentDidMount",value:function e(){var a=_queryString2.default.parse(this.props.location.search),b=a.accessKey,c=a.tenant,d=a.redirect;return b&&c?void(this.carregaAutenticacao(b,c),this.props.history.push(d||"/home")):window.location.assign(this.props.sentinelaURL)}},{key:"carregaAutenticacao",value:function c(a,b){sessionStorage.setItem("token",a),sessionStorage.setItem("tenant",b),_reactCookies2.default.save("token",a,{path:"/"}),_reactCookies2.default.save("tenant",b,{path:"/"})}},{key:"render",value:function a(){return _react2.default.createElement(_AcessoPortal2.default,null,_react2.default.createElement("div",{className:"acesso-app"},_react2.default.createElement("div",null,"Carregando...")))}}]),b}(_react2.default.Component);AcessoApp.defaultProps={sentinelaURL:"localhost"===window.location.hostname?"http://localhost:6005/":"http://login.tron.com.br"},exports.default=AcessoApp;